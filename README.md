# RISE Asset Description

This is a description package for ROS1 and ROS2, containing shared assets used by RISE LAB.

## How to use

To build this package, you need to set up `CMakeLists.txt` and `package.xml` in your package.
The following script will generate the appropriate `CMakeLists.txt` and `package.xml` for you.
(Make sure to run `chmod +x select_ros_version.sh` first.)

For ROS2:

```sh
./select_ros_version.sh ros2
colcon build --symlink-install --packages-select rise_asset_description
```

For ROS1:

```sh
./select_ros_version.sh ros1
catkin_make --pkg rise_asset_description
```

## Directory Structure

```text
.
├── README.md
├── LICENSE
├── .gitignore
├── select_ros_version.sh   # Script to switch between ROS1 and ROS2
├── CMakeLists.txt          # Auto-generated by the `select_ros_version.sh`
├── package.xml             # Auto-generated by the `select_ros_version.sh`
├── ros1
│   ├── CMakeLists.ros1.txt
│   └── package.ros1.xml
├── ros2
│   ├── CMakeLists.ros2.txt
│   └── package.ros2.xml
├── launch
│   ├── display.launch      # ROS1-specific launch file
│   └── display.launch.py   # ROS2-specific launch file
├── rviz
│   └── display.rviz
└── assets
    ├── meshes              # Meshes
    │   ├── <asset_name 1>
    │   │   └── <mesh_name>.dae
    │   ├── <asset_name 2>
    │   │   └── <mesh_name>.stl
    │   ...
    └── xacro               # XACRO files
        ├── <asset_name 1>
        │   └── <urdf_name>.urdf.xacro
        ├── <asset_name 2>
        │   └── <urdf_name>.urdf.xacro
        ...
```

## Testing with Docker

> If you want to test the ROS2 version, use `ros2` instead of `ros1` in the following commands.

Step 1: Allow docker to access the X server and build the base image **(only need to do this once)**

```sh
xhost + local:docker
cd {THIS_PACKAGE_DIR}/test
docker build -t ros1-description -f ros1-description.Dockerfile .
```

Step 2: Run the test container

```sh
cd {THIS_PACKAGE_DIR}/ros1
docker compose up --build
```

Step 3: Set a proper `Fixed Frame` in your RViz window. For example, `table_frame` is used for `honeycomb_table`.

To clean up and remove the generated image, you can run:

```sh
docker compose down --rmi all
```
